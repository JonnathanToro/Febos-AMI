<template>
  <vs-row vs-w="12" class="wrap-option" v-bind:class="{ 'selected': selectedCategory }">
    <vs-col vs-lg="8" vs-sm="4" vs-xs="12">
      <div>
        <input
          class="input-option" v-bind:class="{
            'input-blocked': !editMood,
            'input-edit': editMood
          }"
          size="small" v-model="option.valor"
        />
      </div>
      <div>
        <input
          class="input-option" v-bind:class="{
            'input-blocked': !editMood,
            'input-edit': editMood
          }"
          size="small"
          v-model="option.descripcion"
        />
      </div>
    </vs-col>
    <vs-col vs-type="flex" vs-justify="flex-end" vs-align="center" vs-lg="4" vs-sm="4" vs-xs="12">
      <vs-tooltip text="Ver instituciones">
        <vs-button
          v-if="type === 'category'"
          color="primary"
          class="margin-right"
          size="small"
          type="border"
          v-on:click="listInstitutions(option)"
          icon="search"
        />
        <span />
      </vs-tooltip>
      <CheckPermission permission="ED029">
        <vs-tooltip text="Editar Opci贸n" v-if="!editMood">
          <vs-button
            color="primary"
            class="margin-right"
            size="small"
            type="border"
            v-on:click="editOption(option)"
            icon="edit"
          />
          <span />
        </vs-tooltip>
      </CheckPermission>
      <vs-tooltip text="Guardar edici贸n" v-if="editMood">
        <vs-button
          color="success"
          class="margin-right"
          size="small"
          type="border"
          v-on:click="saveOption(option)"
          icon="save"
        />
        <span />
      </vs-tooltip>
      <vs-tooltip text="Cancelar edici贸n" v-if="editMood">
        <vs-button color="danger" class="margin-right" size="small"
                   type="border" v-on:click="editOption(option)" icon="cancel" />
        <span />
      </vs-tooltip>
      <CheckPermission permission="ED030">
        <vs-tooltip text="Deshabilitar opci贸n">
          <vs-switch
            color="primary"
            v-model="selected"
            v-on:click="toggleEnableOptionInstitution({ option, selected, type })"
          />
          <span />
        </vs-tooltip>
      </CheckPermission>
    </vs-col>
  </vs-row>
</template>

<script>

import { mapActions } from 'vuex';

import CheckPermission from '@/febos/global/usuario/components/CheckPermission';

export default {
  components: { CheckPermission },
  mixins: [],
  data() {
    return {
      editMood: false,
      createMood: false,
      selected: this.option.deshabilitado !== 1
    };
  },
  props: {
    option: {
      type: Object,
      required: true,
      default: () => {}
    },
    type: {
      type: [String, Object],
      required: true,
      default: () => ''
    },
    selectedCategory: {
      type: Boolean,
      required: false,
      default: false
    }
  },
  watch: {},
  computed: {},
  methods: {
    ...mapActions('Herramientas', [
      'listInstitutions',
      'toggleEnableOptionInstitution',
      'saveOptions',
      'clearSelected'
    ]),
    editOption() {
      this.editMood = !this.editMood;
      this.createMood = false;
      if (this.type === 'category') {
        this.clearSelected({ type: 'INSTITUTION', option: this.option });
      }
    },
    saveOption(option) {
      this.editMood = false;
      this.saveOptions(option);
    }
  }
};
</script>

<style lang="css" scoped>

  .margin-top {
    margin-top: 20px;
  }
  .margin-right {
    margin-right: 10px;
  }

  .wrap-option {
    background:  #f8f8f8;
    margin-bottom: 6px;
  }

  .input-option {
    color: inherit;
    margin-top: 4px;
    width: 80%;
    background: transparent;
  }

  .input-blocked {
    color: inherit;
    pointer-events: none;
    border: none !important;
    padding: 4px 4px 6px 4px;
    border-radius: 5px;
  }

  .input-edit {
    color: inherit;
    border: 1px solid #66258324;
    padding: 4px 4px 6px 4px;
    border-radius: 5px;
  }

  .selected {
    background: #cfe7f3;
  }

</style>
